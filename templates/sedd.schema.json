{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sedd.dev/sedd.schema.json",
  "title": "SEDD Configuration",
  "description": "Configuration file for SEDD (Spec & Expectation Driven Development)",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "specsDir": {
      "type": "string",
      "default": ".sedd",
      "description": "Directory for storing feature specifications. Default: '.sedd', use 'specs' for legacy projects."
    },
    "branchPattern": {
      "type": "string",
      "default": "{{id}}-{{name}}",
      "description": "Pattern for feature branch names. Variables: {{id}}, {{name}}"
    },
    "scriptRunner": {
      "type": "string",
      "enum": ["auto", "powershell", "bash"],
      "default": "auto",
      "description": "Script runner to use. 'auto' detects platform."
    },
    "autoSplit": {
      "type": "object",
      "description": "Auto-split configuration for large files",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable automatic file splitting"
        },
        "maxLines": {
          "type": "integer",
          "default": 400,
          "minimum": 100,
          "maximum": 1000,
          "description": "Maximum lines before auto-split triggers"
        }
      },
      "additionalProperties": false
    },
    "hooks": {
      "type": "object",
      "description": "Hook behavior configuration",
      "properties": {
        "assertive": {
          "type": "boolean",
          "default": true,
          "description": "Force skill activation (true) or just suggest (false)"
        },
        "skills": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": ["langchain-expert", "architecture-mapper", "defect-analyzer"],
          "description": "Skills to activate based on prompt keywords"
        },
        "checkOnlyCurrentMigration": {
          "type": "boolean",
          "default": true,
          "description": "Only check current migration, not historical migrations"
        },
        "showSyncWarnings": {
          "type": "boolean",
          "default": true,
          "description": "Show warnings when task files are out of sync"
        },
        "blockOnSyncError": {
          "type": "boolean",
          "default": false,
          "description": "Block Claude from stopping if files are out of sync (optional, disabled by default)"
        }
      },
      "additionalProperties": false
    },
    "commit": {
      "type": "object",
      "description": "Git commit configuration",
      "properties": {
        "askBeforeCommit": {
          "type": "boolean",
          "default": true,
          "description": "Ask user confirmation before committing"
        },
        "messagePattern": {
          "type": "string",
          "default": "{{type}}({{id}}): {{message}}",
          "description": "Commit message pattern. Variables: {{type}}, {{id}}, {{message}}"
        }
      },
      "additionalProperties": false
    },
    "github": {
      "type": "object",
      "description": "GitHub integration configuration",
      "properties": {
        "engine": {
          "type": "string",
          "enum": ["local", "github", "both"],
          "default": "local",
          "description": "Task engine: 'local' (markdown only), 'github' (issues only), 'both' (sync both)"
        },
        "owner": {
          "type": "string",
          "description": "GitHub owner (user or org) for project board"
        },
        "repo": {
          "type": "string",
          "description": "GitHub repository name"
        },
        "project": {
          "type": "object",
          "description": "GitHub Projects V2 configuration",
          "properties": {
            "projectNumber": {
              "type": "integer",
              "description": "Project number (visible in project URL)"
            },
            "projectId": {
              "type": "string",
              "description": "Project node ID (GraphQL ID)"
            },
            "title": {
              "type": "string",
              "description": "Project title for display"
            }
          },
          "required": ["projectNumber", "projectId", "title"],
          "additionalProperties": false
        },
        "columns": {
          "type": "object",
          "description": "Status field configuration for the project board",
          "properties": {
            "fieldId": {
              "type": "string",
              "description": "Status field node ID (GraphQL ID)"
            },
            "options": {
              "type": "object",
              "description": "Map of column name → option ID",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "required": ["fieldId", "options"],
          "additionalProperties": false
        },
        "columnMapping": {
          "type": "object",
          "description": "Map SEDD statuses to project board column names",
          "properties": {
            "pending": {
              "type": "string",
              "default": "Todo",
              "description": "Column for pending/todo items"
            },
            "in-progress": {
              "type": "string",
              "default": "In Progress",
              "description": "Column for in-progress items"
            },
            "completed": {
              "type": "string",
              "default": "Done",
              "description": "Column for completed items"
            },
            "blocked": {
              "type": "string",
              "default": "Blocked",
              "description": "Column for blocked items"
            }
          },
          "additionalProperties": false
        },
        "wipLimits": {
          "type": "object",
          "description": "WIP limits per column (column name → max items)",
          "additionalProperties": {
            "type": "integer",
            "minimum": 1
          }
        },
        "wipEnforcement": {
          "type": "string",
          "enum": ["warn", "block"],
          "default": "warn",
          "description": "WIP limit enforcement: 'warn' (show warning) or 'block' (prevent adding)"
        },
        "autoSync": {
          "type": "string",
          "enum": ["ask", "auto", "off"],
          "default": "ask",
          "description": "Auto-sync behavior: 'ask' (prompt user), 'auto' (sync silently), 'off' (no sync)"
        },
        "syncTasks": {
          "type": "string",
          "enum": ["off", "manual", "auto"],
          "default": "off",
          "description": "Task-to-issue sync: 'off' (no task issues), 'manual' (on demand), 'auto' (create issue per task)"
        },
        "labels": {
          "type": "object",
          "description": "GitHub labels for auto-created issues",
          "properties": {
            "feature": {
              "type": "string",
              "description": "Label for feature/story issues"
            },
            "task": {
              "type": "string",
              "description": "Label for task issues"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
